# 操作系统学习笔记-文件管理

- [操作系统学习笔记-文件管理](#%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86)
  - [文件控制块](#%E6%96%87%E4%BB%B6%E6%8E%A7%E5%88%B6%E5%9D%97)
  - [文件组织与数据存储](#%E6%96%87%E4%BB%B6%E7%BB%84%E7%BB%87%E4%B8%8E%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8)
  - [Reference](#reference)

## 文件控制块

- File Control Block 是操作系统为每个文件建立的唯一数据结构，包含了全部文件属性，目的是方便操作系统对文件的管理、控制、存取。
- FCB 文件名和其他管理信息分开，其他信息单独组成索引节点inode，此索引节点位置由inode号标识。

## 文件组织与数据存储

卷是存储介质的物理单位，块是存储介质上连续信息所处组成的区域，也称物理记录。块是内存和外存交换信息的基本物理单位。

- 文件逻辑结构

  - 流式文件：这是一种无结构文件，文件内数据不组成记录，只是一串顺序的信息结合，称为字节流文件。
  - 记录式文件：这是一种有结构文件，它包含若干逻辑记录。从操作系统管理角度看，逻辑记录是文件内独立的最小信息单位。
  - 成组和分解：一条逻辑记录被放在文件存储介质上，可能占用一块或多块，或者一个物理块包含多条逻辑记录。若干逻辑记录合并成一组，写入一块叫记录成组。当存储介质上一个物理块镀金系统输入缓冲区，把逻辑记录从块中分离出来的操作叫分解。

- 文件物理结构: 文件系统根据存储设备类型、存取要求、记录使用频度和存储空间容量等因素提供若干种文件存储结构。

  - 顺序文件：文件中逻辑上联系信息存储到相邻物理块上形成的顺序结构叫顺序文件。
  - 连接文件：使用连接字（指针）来表示文件中各条记录之间的关系。文件信息存储在若干物理块中，第一块文件信息物理地址在FCB里，每块连接字指向下一个物理块地址。类似链表。
  - 索引文件：索引结构实现非连续存储。系统为每个文件建立索引表，利用索引表搜索记录的文件称为索引文件，索引表可以放在FCB中，打开文件就可以使用索引表访问文件信息，大文件索引表很大。索引结构式连接结构的扩展，除了连接文件的优点外，记录还可以散列存储，具有直接读写任意记录的能力，便于增、删、改。缺点是索引表时空开销大。
  - 直接文件：直接存储在设备上，用哈希法将记录的关键字与其地址建立某种对应关系，实现快速文件存取。也称散列文件、哈希文件。

## Reference

- [操作系统学习笔记-05文件管理](http://blog.talisk.cn/blog/2016/01/05/OS-Learning-06-File-Manage/)